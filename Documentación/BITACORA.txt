BITÁCORA

04/10 - Se comenzó a investigar sobre la configuración de conexiones Wifi STA y AP en el ESP32. 
06/10 - Se leyó la documentación de la librería WebServer para levantar un servidor local en el microcontrolador.
11/10 - Se implementó OTAwebAP junto con la carga del archivo bin.
13/10 - Se hizo el jquery utilizado en el ejemplo de otaWebUpdater embebido en el código para que funcione cuando esté en modo AP ya que no permitía la subida del archivo debido a que en el código html buscaba un jquery desde una página a la que no puede acceder de modo AP (https://esp32.com/viewtopic.php?t=11744)
27/10 - Se estuvo investigando acerca de qué seguridad provee el ESP32 y opciones alternativas como SecureBoot y FlashEncriptyon de la librería de Espressif.
28/10 - Se creó un archivo para contener los datos necesarios del jquery en formato hexadecimal
29/10 - Se creó el proyecto en platformio, para no tener incompatibilidad respecto al IDE de arduino
30/10 - Se realizaron test para el proyecto, hay errores a la ejecución de los test, se probó un test que compara un texto:

.pio\build\esp32dev\libFrameworkArduino.a(main.cpp.o):(.literal._Z8loopTaskPv+0x8): undefined reference to `setup()'
.pio\build\esp32dev\libFrameworkArduino.a(main.cpp.o):(.literal._Z8loopTaskPv+0xc): undefined reference to `loop()'
.pio\build\esp32dev\libFrameworkArduino.a(main.cpp.o): In function `loopTask(void*)':
C:\Users\God\.platformio\packages\framework-arduinoespressif32\cores\esp32/main.cpp:18: undefined reference to `setup()'
C:\Users\God\.platformio\packages\framework-arduinoespressif32\cores\esp32/main.cpp:21: undefined reference to `loop()'
collect2.exe: error: ld returned 1 exit status
*** [.pio\build\esp32dev\firmware.elf] Error 1


31/10 - Persisten los mismos errores en los test:

.pio\build\esp32dev\libFrameworkArduino.a(main.cpp.o):(.literal._Z8loopTaskPv+0x8): undefined reference to `setup()'
.pio\build\esp32dev\libFrameworkArduino.a(main.cpp.o):(.literal._Z8loopTaskPv+0xc): undefined reference to `loop()'
.pio\build\esp32dev\libFrameworkArduino.a(main.cpp.o): In function `loopTask(void*)':
C:\Users\God\.platformio\packages\framework-arduinoespressif32\cores\esp32/main.cpp:18: undefined reference to `setup()'
C:\Users\God\.platformio\packages\framework-arduinoespressif32\cores\esp32/main.cpp:21: undefined reference to `loop()'
collect2.exe: error: ld returned 1 exit status
*** [.pio\build\esp32dev\firmware.elf] Error 1

01/11 - Habiendo investigado las opciones de seguridad, primero se opta por la seguridad MD5 provista por ArduinoOTA que no es tan compleja de implementar y aun así hace más seguro el entorno de la conexión.
02/11 - Se solucionaron los errores anteriores cambiando la extensión del archivo, se probó en un nuevo proyecto probar un test en el que estuviera el main.cpp en blanco para ver si interfiere con el test pero muestra un nuevo error sobre el puerto al que se conecta el esp32:
For some development platforms it can be a USB flash drive (i.e. /media/<user>/<device name>)
*** [upload] Explicit exit, status 1
Se soluciona el anterior error conectando el ESP32, ya que el test estaba configurado en el archivo platformio.ini para ejecutarse en el framework del esp32, aparece un error:
Error: Please specify `upload_port` for the environment or use the global `--upload-port` option.
Se intenta cambiar el contenido de la carpeta platformio.ini agregando la línea test_build_project_src = true? para intentar corregir el error anterior y no se llega a ningún tipo de solución al problema.

03/11 - Se prueba correr los test en un framework de espressif y no el de arduino aparece un error ya que los test requieren el archivo </unity.h> requieren del archivo <Arduino.h> para las pruebas que se quieren realizar, sigue habiendo un error en el puerto a pesar del cambio de framework.
03/11 - Se realizan pruebas sobre el archivo platformio.ini para ejecutar un script previo a la ejecución del build de manera que se compruebe por medio del script la manera de corroborar la ejecución de una función con el contenido necesario de ota, se comprueba que con la configuración del archivo polatformio.ini al momento de hacer el build y con la ejecución del script no se crea el .bin y se muestra el error correctamente.
05/11 - Se incluye seguridad MD5 con hash de la contraseña y manejo de errores. Queda probarlo con el resto de código desarrollado.
07/11 - Luego de deployar la seguridad MD5 en el ESP32 se observa que no reconoce las sentencias de la librería ArduinoOTA, se va a cambiar el orden de ejecución del código.
07/11 - Por otro lado se verificó que la autenticación vía ArduinoOTA sólo era factible si el update se realizaba desde el IDEArduino o PlatformIO.
10/11 - Se probaron nuevamente las funciones de la librería ArduinoOta, no hubo ningún error pero no se reflejaba ningún resultado al utilizarlas. Probable conflicto con la librería WebServer.
10/11 - Se quito lo relacionado al servidor y efectivamente la librería ArduinoOTA fue detectada, igualmente no nos fue de utilidad dado que necesitamos el servidor local para manejar las acciones de /update y /version
11/11 - Se probó utilizar la función server.Authenticate() de WebServer.h en lugar de las funciones de librería ArduinoOta, esta funciona sin embargo por el momento no está activa en /update sino en ServerIndex, lo cual pide los datos de acceso antes de mostrar la vista del botón para enviar el archivo.

